# 服务治理
服务治理基于RPC包含以下治理中间件

| 项 | 作用 | 举例 |
| :-: |  |  |
| 网关 | 外部请求入口 | 外部沟通，如业主要求刷漆 |
| 服务管理 | 服务镜像仓库和服务启停管理 | 装修公司，如提供人员 |
| 注册中心 | 服务实例登记/退出 | 人员管理，如刷漆工到现场后登记 |
| 配置中心 | 配置项统一管理 | 装修信息，如用xx漆 |
| 链路监控 | 请求实例的flow和输入输出 | 操作记录，如某墙面的某次刷漆记录 |
| 流量管控 | 1. 负载均衡<br> 2. 熔断<br> 3. 降级<br> | 1. 刷漆工甲当前工作量较多，后续刷漆请求可以交给工作量少的其他工人<br> 2. 刷漆工都病倒了，业主被告知暂不提供服务。装修公司介入处理<br> 3. 当前刷漆工作量超过刷漆工，为了完成尽可能多的工作，降低刷漆标准(比如播放低分辨率的视频)<br> |

## 治理中间件
* 注册和配置：https://nacos.io/zh-cn/
* 流量管理：Sentinel

# 资料
## [RPC](https://www.jianshu.com/p/959030de7f1c)
* RPC是一种设计、实现框架。通讯协议是其中一部分，比如HTTP协议
* RPC的本质是提供了一种轻量无感知的跨进程通信的方式
  * 在分布式机器上调用其他方法与本地调用无异（远程调用的过程是透明的，你并不知道这个调用的方法是部署在哪里，通过PRC能够解耦服务）。
  * RPC是根据语言的API来定义的，而不是基于网络的应用来定义的，调用更方便，协议私密更安全、内容更小效率更高。
* RPC框架一般都有注册中心，有丰富的监控管理；发布、下线接口、动态扩展等，对调用方来说是无感知、统一化的操作。
* grpc采用http2，性能效率类似tcp
