# 版本和发布

## 版本
### 结构(GUN)
* 主版本号.子版本号[.修正版本号[.编译版本号]]
* Major.Minor[.Revision[.BuildNumber]]
* 示例：1.2.1，2.0，5.0.0.13124

| 名称 | 说明 |
| :-- | -- |
| Major | 大升级，包括大的Sprint |
| Minor | Sprint |
| Revision | hotfix。Major或者Minor改变时会重置为0 |
| Build | 编译 |

### 阶段
* Alpha、Beta、Gamma、RC（Release Candidate）、Release

| 阶段 | 名称 | 说明 |
| :-- | -- | -- |
| α（alpha） | 内部测试版 | 初步完成的产品，通常只用于在开发者内部交流，也有很少一部分发布给专业的测试人员，一般情况下，该版本会存在较多bug，不适合普通用户使用。 |
| β（Beta）| 外部测试版 | 无严重的错误，存在一些缺陷，需要经过大规模的发布测试进一步发现、消除错一般不适合普通用户大规模安装使用。 |
| γ（Gamma）| 外部测试版 | 已经相当成熟，与正式版相差无几 |

## 环境和发布
### 环境
| 环境 | 用户 | 分支 | 说明 |
| :-- | -- | -- | -- |
| 开发 | 开发人员 | 主分支或者特定开发分支 |  |
| 测试 | 测试人员 | 主分支或者特定开发分支 |  |
| 回归 | 测试人员 | 主分支 |  |
| 预发布 | 公司内部用户 | 发布分支 | 1套连接生产环境数据库的独立环境 |
| 灰度 | 忠诚度较高的种子用户/活跃用户 | 发布分支 | 少量生产服务器 |
| 生产 | 所有用户 | 发布分支 | 全部生产服务器 |

### 灰度升级
| 项 | 灰度升级支持 | 说明 |
| :-- | -- | -- |
| 网站 | Nginx |  |
| API | Nginx/Spring Cloud |  |
| 服务 | API(系统架构)/Spring Cloud |  |
| 配置(系统和系统服务) | 系统和系统服务 |  |
| 数据库 | 系统架构 | 系统架构不能因为数据结构调整会有异常(如新增字段)。例如insert必须指定字段 |

### 资料
* [软件的生命周期中一般分4个版本](https://blog.51cto.com/sandshell/2162195)
* [互联网项目发布环境:测试、回归、预发布、灰度发布、上生产](https://blog.csdn.net/linsongbin1/article/details/48467711)
* [灰度发布](http://arganzheng.life/gray-release.html)
* [使用Nginx实现Web应用灰度发布](https://www.jianshu.com/p/e89ad8748764)，cookie,ip
