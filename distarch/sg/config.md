# 配置

## 服务器的分工策略
* 大型系统因服务独立，无此需求。主要集中在中小系统，一个程序上同时可以执行多个服务。
* 方案如下，推荐用1
  1. 先来申请的程序优先工作
  1. 每个工作指定工作的服务器程序
  1. 每个程序指定分配的工作

## 无配置化运行(含安装和升级)
### 设计
1. 配置保存在数据库，改变后通过zookeeper实时更新
1. 配置地址通过运行参数动态设置：如java -jar -e configDb=url
1. 配置页(独立页面,可编辑)，按照版本显示所有需要的配置。如已配置，则自动显示。所有必须配置项有内容后才可保存。
1. 配置页的配置管理，通过json管理，每次有新版本都需追加，显示最新的版本。格式是{"版本号1": ["config1", "config2"], "版本号X": ["config1", "config2", "config3"]}
### 流程
1. 安装：网站启动时配置为空，自动跳转到配置页，编辑保存。
1. 升级：手工打开配置页，编辑保存。
