# 架构目录
* 基于arch.md和architect.md[放到arch.md的目录]

# what
原因，收益

# 发展历程
![微服务架构的演进](https://img-blog.csdnimg.cn/20210307164541864.png)，来自https://blog.csdn.net/qq_26129413/article/details/114488730

# HOW
合适的才是最好的
演进式架构
SOLID原则
技术债务

# 人
## 能力要求

环境搭建手册
构建发布手册
安装/集成使用手册


我是分割线，上面是要整理的


# 架构
## 什么是架构
> 类比：设计大楼【地基重做就是架构重构了】，边开飞机边换引擎【地基没问题】
知道钢筋特性及其趋势，不需要知道咋做钢筋

#### 术语
| 项 | 定义 | 说明 |
| :-: | - | - |
| 模块 | 特定业务逻辑功能的代码集合 | 数据和方法的封装 |
| 库 | 特定业务的代码集合 |  |
| 系统 | 可运行 | 汽车是系统(能载重前进) |
| 子系统/微服务 | 某个系统的单一服务子系统，无法独立使用 | 发动机、变速器等是子系统(不能单独载重前进) |
| 中间件 | 独立通用**服务** | 如数据库中间件 |
| 组件 | 通用复用的系统构成部分的**泛指** | 包括且不限于模块、服务、中间件等 |
| 架构 | 系统的规划设计 |  |
| 框架 | 提供功能和架构规范的**通用库** | 如SpringMVC(JavaWeb的MVC开发框架)，Boost |

中间件是介于操作系统和应用软件之间，为应用软件提供服务功能的软件。由于介于两种软件之间，所以称为中间件。
有消息中间件，交易中间件，应用服务器等。
通过中间件，应用软件可以工作于多平台或OS环境。

## 收益
1. 系统稳定和扩展，复用度高
1. 开发简单高效：提升开发效率和产品质量
1. 维护方便升级容易：提升问题定位和解决能力，降低维护成本
1. 解决
    1. “重复造轮子”和“烟囱式架构”
    1. 技术债

## 设计方案
### 目标
1. 合适匹配
1. 系统稳定性和可用性
1. 业务扩展性

### 指导思想
1. 大中台小前端
1. 通用和架构做成通用中台，分布式可扩展性的架构
1. 业务领域建模抽象，模块化组件。业务通用库和服务视公司情况是否独立出业务中台
1. 渐进式架构设计，具有快速迭代能力。解决需求和痛点
1. 不做轮子(这世界轮子太多了)，做粘合剂整合轮子：整合方案 + 轮子使用的封装 + 小工具。

### 成功三要素
> 老板支持，独立推广，分层和模块化(微内核)

### 设计
* 设计原则：简单，适用，演化

#### 概要
  1. 分层：IaaS，PaaS，SaaS
  1. 模块化
      1. 基础库，网络通讯库
      1. 业务通用库，图形处理库
  1. 约定大于配置

#### 服务的软件架构
| 层 | 英文 | 说明 |
| :-: | - | - |
| 表示层 | Presentation |  |
| 业务层 | Business |  |
| 服务层 | Service |  |
| 持久层 | Persistence |  |
| 数据库层 | Database |  |

## 知识
### 重构
* 随着业务快速迭代，重构是个正常需求。
* 重构是经常性做的，不是攒到某一刻动大手术，甚至推翻重做，那就不叫重构了。
* 团队需要日常做代码质量检查: 做Bug分析、非模板性和公共类库代码检查，以发现代码腐烂程度，哪些代码没有做很好的架构与精心的代码设计。

| 重构项 | 重构原因 | 说明 |
| :-: | - | - |
| 代码 | 代码质量差 | 做好团队研发能力建设 |
| 业务 | 业务有大变动，当前产品无法支持 | 好的业务架构可以支持的更久 |
| 架构 | 技术架构无法支持大流量等 | 好的技术架构可以支持的更久 |
| 团队 | 团队不行 | 做好团队建设 |

### 架构进化
* 同自然界一样，感知变化并适应之，不断强化优势项
* 通过模块化解耦各模块，降低进化成本
* 每次功能调整和重构都是进化

### 资料
* [亚马逊 CTO 的“中台论”](https://www.infoq.cn/article/SgOOkOhsQBcdkDDEIASg)
* [设计模式](https://tech.wangyaqi.cn/#/sys/dp)
* [技术委员会](https://blog.csdn.net/aisoo/article/details/104490999)
* [架构师](https://rd.wangyaqi.cn/#/hire/material/architect)
* [概要设计](https://tech.wangyaqi.cn/#/doc/sbd)
* [中台团队](https://rd.wangyaqi.cn/#/hire/material/zt)

### IaaS/PaaS/SaaS
![IaaSPaaSSaaS](https://pic4.zhimg.com/80/v2-1a82f8a4997b0ba53d801639d4c6706e_hd.jpg)
* Application: CRM
* Data: data from the application - stored in files, SQL server, etc.
* Runtime: .NET and Java
* Middleware: TCP/IP, ODBC connection, etc
* O/S: Windows 2012

### 微服务
* [微服务架构](https://developer.51cto.com/article/579943.html)

### 字节跳动
* [字节跳动基础架构技术迭代演进之路](https://www.infoq.cn/article/4DfsBVMVwhmeJN5Z7stX)，字节跳动的火山引擎
> 从技术体系上，字节的架构主要由三部分构成，存储 + 计算 + 研发体系：
在存储层面（注：这里的存储包括 HDFS、对象等经典存储系统，也包括 NoSQL、NewSQL、图数据库等系统），字节的策略是演进到分层存储的体系结构下，在统一的池化存储上构建兼容开源系统的存储产品矩阵来满足业务需求。基于池化存储的分层结构帮我们统一底层实现，将分布式的常见问题以及重要优化实施一次，benefit 所有上层系统，简化上层系统的开发，避免丰富的存储产品矩阵所带来运维复杂性；兼容开源系统的存储产品矩阵主要用来简化业务接入，提升开发效率；
从计算层面，我们在推进在线计算系统和离线计算的融合，长期来讲会将 Kubernetes 和 YARN 底层整合为一套资源调度系统，将 PaaS、FaaS、批式计算、流式计算在统一编排调度体系运行，持续推进资源利用率的提升。字节内部也在探索虚拟化和容器化的进一步融合；
从研发体系侧（字节将 RPC 框架、PaaS、智能运维、治理系统、稳定性系统、效能系统统称研发体系），字节绝大部分的业务是基于 PaaS 构建而非基于 IaaS 构建的，PaaS 化使得业务方关注的是资源而非机器，对于资源流量统一调配、环境治理系统的统一有非常重要的意义。
